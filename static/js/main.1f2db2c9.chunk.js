(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{74:function(e,t,n){},75:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),s=n(24),o=n.n(s),a=(n(74),n(75),n(76),n(63)),i=n(9),j=n(33),u=n(45),l=n(2);function d(){var e=Object(i.g)();function t(t){t.preventDefault(),e.push(t.target.getAttribute("href"))}return Object(l.jsxs)(j.a,{bg:"dark",variant:"dark",expand:"lg",children:[Object(l.jsx)(j.a.Brand,{children:"DemandeMoi"}),Object(l.jsx)(j.a.Toggle,{"aria-controls":"topbar-nav"}),Object(l.jsx)(j.a.Collapse,{id:"topbar-nav",children:Object(l.jsxs)(u.a,{className:"mr-auto",children:[Object(l.jsx)(u.a.Link,{href:"/",onClick:t,children:"Voir les questions"}),Object(l.jsx)(u.a.Link,{href:"/ask",onClick:t,children:"Poser une question"})]})})]})}var b=n(30),h=n(28),O=n(12),x=n(29),p=n(19),f={addQuestion:function(e){return fetch("".concat(g,"/questions"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(v).then((function(e){return e.json()}))},getAll:function(){return fetch("".concat(g,"/questions"),{method:"GET"}).then(v).then((function(e){return e.json()}))},getOne:function(e){return fetch("".concat(g,"/questions/").concat(e),{method:"GET"}).then(v).then((function(e){return e.json()}))},answer:function(e){var t=e.id,n=e.body;return fetch("".concat(g,"/questions/").concat(t,"/answer"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)}).then(v).then((function(e){return e.json()}))}},g=Object({NODE_ENV:"production",PUBLIC_URL:"/ask-template",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_HOST_API||"http://localhost:3630",v=function(e){return e.ok?e:e.text().then((function(e){throw new Error(e)}))},m={questions:f};function A(){var e=Object(i.g)(),t=Object(c.useState)(""),n=Object(b.a)(t,2),r=n[0],s=n[1],o=Object(c.useState)("question"),a=Object(b.a)(o,2),j=a[0],u=a[1],d=Object(c.useState)(""),f=Object(b.a)(d,2),g=f[0],v=f[1],A=Object(p.useMutation)(m.questions.addQuestion,{onSuccess:function(t){e.push("/")}}).mutate;return Object(l.jsxs)(h.a,{children:[Object(l.jsx)("h1",{children:"Poser une question"}),Object(l.jsxs)(O.a.Group,{children:[Object(l.jsx)(O.a.Label,{children:"Votre nom"}),Object(l.jsx)(O.a.Control,{value:r,onChange:function(e){return s(e.target.value)}})]}),Object(l.jsxs)(O.a.Group,{children:[Object(l.jsx)(O.a.Label,{children:"Type"}),Object(l.jsxs)(O.a.Control,{as:"select",value:j,onChange:function(e){return u(e.target.value)},children:[Object(l.jsx)("option",{value:"question",children:"Question"}),Object(l.jsx)("option",{value:"action",children:"Action"})]})]}),Object(l.jsxs)(O.a.Group,{children:[Object(l.jsx)(O.a.Label,{children:"Question/Action"}),Object(l.jsx)(O.a.Control,{as:"textarea",value:g,onChange:function(e){return v(e.target.value)},isInvalid:""===g,rows:5})]}),Object(l.jsx)(x.a,{onClick:function(){g&&A({author:r||void 0,type:j,question:g})},disabled:!g,style:{marginTop:"10px"},children:"Ajouter"})]})}var w=n(42),C=n(51);function S(e){return""===e?"":(t=e instanceof Date?e:new Date(e),"".concat(q(t.getDate()),"/").concat(q(t.getMonth()+1),"/").concat(t.getFullYear()));var t}function q(e){return e<10?"0"+e:""+e}function y(){var e=Object(i.g)(),t=Object(p.useQuery)("questions",m.questions.getAll),n=t.data,c=t.isLoading;return console.log(n),Object(l.jsxs)(h.a,{children:[Object(l.jsx)("h1",{children:"Toutes les questions"}),c?Object(l.jsx)(w.a,{animation:"border"}):n.map((function(t){return Object(l.jsx)(C.a,{children:Object(l.jsxs)(C.a.Body,{children:[Object(l.jsx)("p",{children:t.question}),Object(l.jsxs)("p",{children:["Pos\xe9e par ",null!==t.author?t.author:"Anonyme"," le"," ",S(t.createdAt)]}),null===t.Answer?Object(l.jsx)(x.a,{onClick:function(){return e.push("/answer/"+t.id)},children:"R\xe9pondre"}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("p",{children:"R\xe9ponse:"}),Object(l.jsx)("p",{children:t.Answer.answer}),Object(l.jsxs)("p",{children:["R\xe9pondu le: ",S(t.Answer.createdAt)]})]})]})},t.id)}))]})}function T(){var e=Object(i.h)().id,t=Object(i.g)(),n=Object(c.useState)(""),r=Object(b.a)(n,2),s=r[0],o=r[1],a=Object(p.useQuery)(["questions",e],(function(){return m.questions.getOne(e)})),j=a.data,u=a.isLoading,d=Object(p.useMutation)(m.questions.answer,{onSuccess:function(e){t.push("/")}}).mutate;return Object(l.jsx)(h.a,{children:u?Object(l.jsx)(w.a,{animation:"border"}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("p",{children:j.question}),Object(l.jsxs)("p",{children:["Pos\xe9e par ",null!==j.author?j.author:"Anonyme"," ","le ",S(j.createdAt)]}),null===j.Answer?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)(O.a.Group,{children:[Object(l.jsx)(O.a.Label,{children:"R\xe9ponse"}),Object(l.jsx)(O.a.Control,{as:"textarea",value:s,onChange:function(e){return o(e.target.value)},isInvalid:""===s,rows:5})]}),Object(l.jsx)(x.a,{onClick:function(){s&&d({id:e,body:{answer:s}})},disabled:!s,style:{marginTop:"10px"},children:"R\xe9pondre"})]}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("p",{children:"R\xe9ponse:"}),Object(l.jsx)("p",{children:j.Answer.answer}),Object(l.jsxs)("p",{children:["R\xe9pondu le: ",S(j.Answer.createdAt)]})]})]})})}var k=function(){return Object(l.jsxs)(a.a,{children:[Object(l.jsx)(d,{}),Object(l.jsxs)(i.d,{children:[Object(l.jsx)(i.b,{path:"/answer/:id",children:Object(l.jsx)(T,{})}),Object(l.jsx)(i.b,{path:"/ask",children:Object(l.jsx)(A,{})}),Object(l.jsx)(i.b,{exact:!0,path:"/",children:Object(l.jsx)(y,{})}),Object(l.jsx)(i.a,{to:"/"})]})]})},P=new p.QueryClient;o.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(p.QueryClientProvider,{client:P,children:Object(l.jsx)(k,{})})}),document.getElementById("root"))}},[[87,1,2]]]);
//# sourceMappingURL=main.1f2db2c9.chunk.js.map